/**
 * Contains most of the cJSON implementation.
 **/
#ifndef JSON_C
#define JSON_C
#include "remote/cJSON/cJSON.h"
#include "remote/cJSON/cJSON.c"
#include <stdlib.h>
#include <string.h>
#include <stdio.h>

#define json_is_array(json) \
	cJSON_IsArray(json)


static cJSON *
json_get_path (/*TODO cJSON *json,*/ char *path)
{if (!path) return NULL;

	cJSON *out /*TODO = json*/;

	// tok size
	const int path_s = strlen (path);
	char *tok = (char *)malloc (path_s);

	// tok placement
	int tok_p = 0;
	for (int i = 0; i < path_s; i++)
	  {
		if (path[i] == '.')
		  {
			tok[i - tok_p] = '\0';
			tok_p = i+1;

			// tok is now valid
		 	printf ("%s\n", tok);

			// handle tok[idx];
			int idx = 0;
			int write = 0;
			if (tok[i - tok_p - 1] == ']')
			  {
				const int tok_s = strlen(tok);
				char *idx_str = (char *)malloc (tok_s);

				// remove 
				int j = (tok_s - 1);
			  	while (j > 0)
				  {
					if (tok[j] == '[')
					  {
					  	break;
					  }
				  }
				j--;
			  }

			/*
			TODO
			cJSON_GetObjectItemCaseSensitive(out, tok);

			// Path dosent exist.
			if (!out) return out;
			*/
		  }
		tok[i - tok_p] = path[i];		
	  }
	free (tok);
	return out;
}

#endif

int main (void)
{
	json_get_path("test.1.2.3");
	return 0;
}
